<!DOCTYPE html>
<html lang="es"
xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{layout/master}">
<head>
  <title>Reservas - Sabor Gourmet</title>
</head>
<body>
  <div layout:fragment="page-content">
    <div class="page-header text-center">
      <h2>Gestión de Reservas</h2>
    </div>

    <div class="mb-3 d-flex gap-2">
      <a class="btn btn-success" th:href="@{/reservas/nuevo}"> Nueva reserva</a>
      <a class="btn btn-secondary" th:href="@{/}"> Volver al inicio</a>
    </div>

    <div class="table-wrapper">
      <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Cliente</th>
          <th>Mesa</th>
          <th>Fecha y hora</th>
          <th>Personas</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="r : ${reservas}">
          <td th:text="${r.id}">1</td>
          <td th:text="${r.cliente.nombre}">Cliente</td>
          <td th:text="${r.mesa.nombre}">Mesa</td>
          <td th:text="${#temporals.format(r.fecha, 'dd/MM/yyyy')} + ' ' + ${#temporals.format(r.hora, 'HH:mm')}">fecha
          </td>
          <td th:text="${r.cantidadPersonas}">2</td>
          <td>
            <span class="badge bg-success" th:if="${r.estado == 'ACTIVA'}" th:text="${r.estado}">ACTIVA</span>
            <span class="badge bg-secondary" th:if="${r.estado != 'ACTIVA'}" th:text="${r.estado}">ACTIVA</span>
          </td>
          <td>
            <div class="action-buttons">
              <a th:href="@{'/reservas/editar/' + ${r.id}}" class="btn btn-primary btn-sm"> Editar</a>
              <form th:action="@{'/reservas/eliminar/' + ${r.id}}" method="post">
                <button type="submit" class="btn btn-danger btn-sm"
                  onclick="return confirm('¿Eliminar la reserva?');"> Eliminar</button>
              </form>
            </div>
          </td>
        </tr>
      </tbody>
      </table>
    </div>
  </div>
</body>
</html>